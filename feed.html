<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>IG RSS Preview</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;max-width:860px;margin:24px auto;padding:0 16px}
    .item{border:1px solid #ddd;border-radius:14px;padding:14px;margin:0 0 16px 0}
    .meta{opacity:.7;font-size:13px;margin:4px 0 10px 0}
    img{max-width:100%;height:auto;border-radius:10px}
  </style>
</head>
<body>
  <h1>IG RSS Preview</h1>
  <p><a href="instagram-feed.xml">Open raw XML</a></p>
  <div id="app">Loadingâ€¦</div>

  <script>
    async function run() {
      const res = await fetch("instagram-feed.xml", {cache: "no-store"});
      const text = await res.text();
      const xml = new DOMParser().parseFromString(text, "text/xml");
      const items = [...xml.querySelectorAll("channel > item")];
      const app = document.getElementById("app");
      app.innerHTML = "";

      for (const it of items) {
        const title = it.querySelector("title")?.textContent || "(untitled)";
        const date  = it.querySelector("pubDate")?.textContent || "";
        const link  = it.querySelector("link")?.textContent || "";
        const html  = it.getElementsByTagName("content:encoded")[0]?.textContent || "";

        const div = document.createElement("div");
        div.className = "item";
        div.innerHTML = `
          <div><a href="${link}"><strong>${title}</strong></a></div>
          <div class="meta">${date}</div>
          <div>${html}</div>
        `;
        app.appendChild(div);
      }
    }
    run();
  </script>
</body>
</html>
